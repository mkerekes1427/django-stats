{% extends 'base.html' %}


{% block content %}



<div class="container col-6" style="margin-top: 100px;">

    {% if messages %}
    {% for msg in messages %}
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <strong>{{msg}}</strong>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
    {% endif %}

    <a href="{% url 'home' %}" class="btn btn-lg btn-secondary fw-bold border-white mx-1 bg-primary" style="margin-bottom: 100px;">Go Back</a>
    <h5 class="text-center" style="margin-bottom: 100px;">The alternative options are based upon column 1 with respect to the value entered in. 
        For example, Col 1 greater than 10 or Col 1 not equal to 10. Value is the numerical value that you are testing. Data must be in CSV form with column header and must be in a single column.</h5>

    <h1 class="text-center display-3 mb-5" >One-Sample Tests</h1>


    <form method="POST" enctype="multipart/form-data">

        {% csrf_token %}

        <p>Choose Calculation</p>

        <select class="form-select mb-5" aria-label="Select" name="test" required>
            <option value="t">T-test</option>
            <option value="z">Z-Test</option>
            <option value="ag">Proportion (Agresti-Coul)</option>
          </select>


        <div class="container col-6 mx-0 mb-5">

            <div class="form-check col-8">
                <input class="form-check-input" type="radio" name="alternative" value="greater">
                <label class="form-check-label">Greater than</label>
            </div>
            <div class="form-check col-8">
                <input class="form-check-input" type="radio" name="alternative" value="less">
                <label class="form-check-label" >Less than</label>
            </div>
            <div class="form-check col-8">
                <input class="form-check-input" type="radio" name="alternative" value="two-sided" checked>
                <label class="form-check-label">Two-sided</label>
            </div>

        </div>

        <div class="col-4 mb-5">
            <input class="form-control mb-4" type="input" aria-label="value" name="value" placeholder="Enter value" required>
            <input class="form-control mb-4" type="input" aria-label="alpha" name="alpha" placeholder="Enter alpha" required>
        </div>
    
        <div class="col-4 mb-5">
            <label class="form-label">Upload a CSV File</label>
            <input class="form-control" type="file" name="data_file" required>
        </div>

        <input class="btn btn-lg btn-secondary fw-bold border-white" type="submit" value="Calculate" style="background-color: #4503df; margin-bottom: 100px;">

    </form>

    {% if calculations %}
    

    <div class="container" style="margin-bottom: 100px;">

        <h1 class="mb-3">T Statistic: {{t_stat}}</h1>
        <h1 class="mb-3">P Value: {{p_value}}</h1>
        <h1 class="mb-3">Degrees Freedom: {{freedom}}</h1>
        <h1 class="mb-3">{{confidence}}% Interval : ({{low}}, {{high}})</h1>

        {% if p_value < alpha %}
        <h1 class="text-danger mt-5">Reject the Null</h1>
        {% else %}
        <h1 class="text-success mt-5">Fail to reject the Null</h1>
        {% endif %}

    </div>

    {% else %}
    <h2>No Calculations</h2>
    {% endif %}

</div>



{% endblock content %}